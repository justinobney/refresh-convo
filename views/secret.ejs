<div class="row-fluid">
  <div class="span3">
    <div class="well">
      <form method="POST" action="/link/create" id="formShareLink">
        <fieldset>
          <div id="legend">
            <legend>Refreshing Links</legend>
          </div>
          <div class="control-group">
            <!-- Text input-->
            <label class="control-label" for="input01">Title</label>
            <div class="controls">
              <input type="text" placeholder="What is it?" class="input-block-level" id="title" name="title"> 
            </div>
          </div>
          <div class="control-group">
            <!-- Text input-->
            <label class="control-label" for="input01">URL</label>
            <div class="controls">
              <input type="text" placeholder="http://" class="input-block-level" id="url" name="url">
              <p class="help-block"></p>
            </div>
          </div>
          <div class="control-group">
            <!-- Textarea -->
            <label class="control-label">More Info</label>
            <div class="controls">
              <div class="textarea">
                <textarea type="" style="margin-left: 0px; margin-right: 0px;" class="input-block-level" id="description" name="description"></textarea>
              </div>
            </div>

            <div class="controls">
              <button class="btn btn-primary btn-block" type="submit">Share Link</button>
            </div>
          </div>
        </fieldset>
      </form>

      <script>
        $('#formShareLink').submit(function(e){
          var form = $(this);
          e.preventDefault();

          var action = form.attr('action');
          var data = form.serialize();

          $.post(action, data, function(resp){
            $('#sharedLinks').empty().append(resp);
          });

          form.find(':text, textarea').val('');
        });
      </script>
    </div>
  </div>
  <div class="span9">
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">Shared Links</a>
          <ul class="nav"></ul>
        </div>
      </div>
    </div>
    
    <div id="sharedLinks">
      <%- partial('sharedLinks', {links: slots.links}) %>
    </div>
  </div>  
</div>
<script>
  socket.on('link:imageUpdate', function (data) {
    
    // { objectId: "KB1p3sKD3j",  imageUrl: "http://files.parse.com/SOME_GUID-FILE_NAME.jpg" }
    var selector = '#link_' + data.objectId;
    $(selector).find('.website-preview').attr('src', data.imageUrl);
  });

  socket.on('link:linkAdded', function (data) {
    console.log('link added ::: new link array => ', data)
  });

  // $(function(){
  //   var width = $('.span3 .well').width();
  //   $('.span3 .well').css('width', width);

  //   $('.span3 .well').affix({offset: $('.span3 .well').position()});
  // });
</script>
